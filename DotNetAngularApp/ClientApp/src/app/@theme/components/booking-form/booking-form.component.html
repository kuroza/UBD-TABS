<form #f="ngForm" (ngSubmit)="submit()" novalidate>
  
  <!-- Building drop down list -->
  <div class="form-group">
    <label for="building">Select Building *</label>
    <select id="building"
    class="form-control"
    (change)="onBuildingChange()"
    [(ngModel)]="booking.buildingId"
    name="buildingId"
    required
    #building="ngModel">
      <option value=""></option>
      <option *ngFor="let b of buildings" value="{{ b.id }}">{{ b.name }}</option>
    </select>
    <div class="alert alert-danger" *ngIf="building.touched && !building.valid">Please specify the building.
    </div>
  </div>

  <!-- Room drop down list -->
  <div class="form-group">
    <label for="room">Select Room *</label>
    <select id="room" class="form-control" [(ngModel)]="booking.roomId" name="roomId" required #room="ngModel">
      <option value=""></option>
      <option *ngFor="let r of rooms" value="{{ r.id }}">{{ r.name }}</option>
    </select>
    <div class="alert alert-danger" *ngIf="room.touched && !room.valid">Please specify the room.</div>
  </div>

  <!-- ng-bootstrap Datepicker -->
  <div class="form-group">
    <label for="bookDate">Select Date *</label>
    <div class="input-group">
      <input 
      id="bookDate" 
      class="form-control" 
      required 
      ngbDatepicker 
      name="bookDate" 
      placeholder="dd/mm/yyyy" 
      [(ngModel)]="booking.bookDate" 
      #bookDate="ngbDatepicker">
      <div class="input-group-append">
        <button class="fa fa-calendar" (click)="bookDate.toggle()" type="button"></button>
      </div>
    </div>
    <div class="alert alert-danger" *ngIf="bookDate.touched && !bookDate.valid">Please specify the date.</div>
  </div>
  
  <!-- * Time slot multiple select -->
  <!-- todo: Bind selected values -->
  <div class="form-group">
    <label>Time slots *</label>
    <ng-select
    required
    id="timeSlots"
    placeholder="Select time slots"
    [multiple]="true"
    [clearable]="true"
    [closeOnSelect]="false"
    [hideSelected]="true"
    >
      <ng-option *ngFor="let t of timeSlots">
        {{ t.startTime | date:'shortTime' }} - {{ t.endTime | date:'shortTime' }}
      </ng-option>
    </ng-select>
  </div>
  <!-- (change)="onTimeSlotToggle(t.id, $event)"
    [(selected)]="booking.timeSlots"
  bindLabel="name"
  bindValue="t.id" -->

  <!-- * ng-select Multiselect -->
  <!-- <ng-select
    [items]="timeSlots"
    [multiple]="true"
    [closeOnSelect]="false"
    [searchable]="false"
    bindLabel="label"
    placeholder="Select time slots"
    [(ngModel)]="booking.timeSlots">
  </ng-select>
  <small>{{ booking.timeSlots | json }}</small> -->

  <!-- * ng-select Multiselect checkbox -->
  <!-- <ng-select
  [items]="timeSlots"
  [multiple]="true"
  bindLabel="name"
  [closeOnSelect]="false"
  bindValue="id"
  [(ngModel)]="booking.timeSlots"
  >
    <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
      <input id="item-{{index}}" type="checkbox" [ngModel]="item$.selected"/> {{ item.startTime | date:'shortTime' }} - {{ item.endTime | date:'shortTime' }}
    </ng-template>
  </ng-select>

  <br>
  <small>{{ booking.timeSlots | json }}</small> -->

  <!-- * Angular Material Multiple Selection -->
  <!-- <mat-form-field>
    <mat-label>Select Time Slots</mat-label>
    <mat-select [formControl]="toppings" multiple>
      <mat-option *ngFor="let timeSlot of booking.timeSlots" [value]="timeSlot">{{ item.startTime | date:'shortTime' }} - {{ item.endTime | date:'shortTime' }}</mat-option>
    </mat-select>
  </mat-form-field> -->

  <!-- ! change to lecturer -->
  <!-- Contact from -->
  <!-- <div class="form-group">
    <label for="contactName">Name *</label>
    <input id="contactName" type="text" class="form-control" [(ngModel)]="booking.contact.name"
      name="contactName" placeholder="" required #contactName="ngModel">
    <div class="alert alert-danger" *ngIf="contactName.touched && !contactName.valid">Please specify the name.</div>
  </div> -->
  <!-- <div class="form-group">
    <label for="contactEmail">Email</label>
    <input id="contactEmail" type="text" class="form-control" [(ngModel)]="booking.contact.email"
      name="contactEmail" placeholder="">
  </div>
  <div class="form-group">
    <label for="contactPhone">Phone</label>
    <input id="contactPhone" type="text" class="form-control" [(ngModel)]="booking.contact.phone"
      name="contactPhone" placeholder="">
  </div> -->

  <!-- ! change to module -->
  <!-- Purpose form -->
  <div class="form-group">
    <label for="module">Module</label>
    <input id="module" type="text" class="form-control" [(ngModel)]="booking.module" name="module" 
    placeholder="">
  </div>
  <div *ngIf="!booking.id">
    <!-- <button nbButton fullWidth status="default" (click)="onClickReset()">Reset</button> --> <!-- ? why it outputs a 401 error? -->
    <button nbButton fullWidth status="success" [disabled]="!f.valid">Book</button>
  </div>
  <div *ngIf="booking.id">
    <button nbButton fullWidth status="primary" [disabled]="!f.valid">Save</button>
  </div>

  <br>
  <p>{{ booking | json }}</p>

</form>
