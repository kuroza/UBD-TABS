<div class="row">
  <div class="col-md-8">
      <nb-card>
          <nb-card-header>
              <h4>Booking</h4>
          </nb-card-header>
          <nb-card-body>
              <booking-calendar-header [(view)]="view" [(viewDate)]="viewDate">
              </booking-calendar-header>

              <div class="alert alert-danger">
              <b>Click on any date to select it</b>
              </div>

              <div [ngSwitch]="view">
              <mwl-calendar-month-view
                  *ngSwitchCase="'month'"
                  [viewDate]="viewDate"
                  [events]="events"
                  (beforeViewRender)="beforeMonthViewRender($event)"
                  (dayClicked)="dayClicked($event.day)"
                  [excludeDays]="excludeDays"
              >
              </mwl-calendar-month-view>
              </div>
              
              <pre>{{ selectedDate | json }}</pre>
          </nb-card-body>
      </nb-card>
  </div>

  <div class="col-md-4">
      <nb-card>
          <nb-card-header *ngIf="!booking.id"><h4>Add Booking</h4></nb-card-header>
          <nb-card-header *ngIf="booking.id"><h4>Edit Booking</h4></nb-card-header>
          <nb-card-body>
            <nb-alert status="danger" closable (close)="onClose()" *ngIf="existAlert">
              This room is already taken!
            </nb-alert>
            <nb-alert status="warning" closable (close)="onClose()" *ngIf="requiredAlert">
              Please enter the required fields!
            </nb-alert>
            <form #f="ngForm" (ngSubmit)="submit()" novalidate>
              
              <!-- * Semester form -->
              <div class="form-group">
                <label>Semester *</label>
                <br>
                <nb-select
                  filled
                  required
                  placeholder="Select Semester"
                  [(selected)]="booking.semesterId"
                  fullWidth="true"
                >
                  <nb-option *ngFor="let s of semesters" value="{{ s.id }}">{{ s.session }}</nb-option>
                </nb-select>
                <br>
              </div>
            
              <!-- * Module form -->
              <div class="form-group">
                <label>Modules *</label>
                <br>
                <nb-select
                  filled
                  multiple
                  required
                  placeholder="Select Modules"
                  [(selected)]="booking.modules"
                  fullWidth="true"
                >
                  <nb-option *ngFor="let m of modules" value="{{ m.id }}">{{ m.code }}: {{ m.name }}</nb-option>
                </nb-select>
                <br>
              </div>
            
              <!-- * Time slot multiple select -->
              <div class="form-group">
                <label>Time slots *</label>
                <br>
                <nb-select
                  filled
                  multiple
                  required
                  placeholder="Select Time Slots"
                  [(selected)]="booking.timeSlots"
                  fullWidth="true"
                >  
                  <nb-option *ngFor="let t of timeSlots" value="{{ t.id }}">{{ t.startTime | date:'shortTime' }} - {{ t.endTime | date:'shortTime' }}</nb-option>
                </nb-select>
                <br>
              </div>
            
              <!-- * Building drop down list -->
              <div class="form-group">
                <label for="building">Building *</label>
                <br>
                <nb-select
                  filled
                  required
                  placeholder="Select Building"
                  [(selected)]="booking.buildingId"
                  fullWidth="true"
                  (selectedChange)="onBuildingChange()"
                >
                  <nb-option *ngFor="let b of buildings" value="{{ b.id }}">{{ b.name }}</nb-option>
                </nb-select>
                
                <!-- <select
                  id="building"
                  class="form-control"
                  (change)="onBuildingChange()"
                  [(ngModel)]="booking.buildingId"
                  name="buildingId"
                  required
                  #building="ngModel"
                >
                  <option value=""></option>
                  <option *ngFor="let b of buildings" value="{{ b.id }}">{{ b.name }}</option>
                </select>
                <div class="alert alert-danger" *ngIf="building.touched && !building.valid">Please specify the building.</div> -->
              </div>
            
              <!-- * Room drop down list -->
              <div class="form-group">
                <label for="room">Room *</label>
                <br>
                <nb-select
                  filled
                  required
                  placeholder="Select Room"
                  [(selected)]="booking.roomId"
                  fullWidth="true"
                >
                  <nb-option *ngFor="let r of rooms" value="{{ r.id }}">{{ r.name }}</nb-option>
                </nb-select>
            
                <!-- <select
                  id="room"
                  class="form-control"
                  [(ngModel)]="booking.roomId"
                  name="roomId"
                  required
                  #room="ngModel"
                >
                  <option value=""></option>
                  <option *ngFor="let r of rooms" value="{{ r.id }}">{{ r.name }}</option>
                </select>
                <div class="alert alert-danger" *ngIf="room.touched && !room.valid">Please specify the room.</div> -->
              </div>
            
              <!-- * ng-bootstrap Datepicker -->
              <!-- <div class="form-group">
                <label for="bookDate">Date *</label>
                <div class="input-group">
                  <input 
                  id="bookDate" 
                  class="form-control" 
                  required 
                  ngbDatepicker 
                  name="bookDate" 
                  placeholder="yyyy-mm-dd" 
                  [(ngModel)]="booking.bookDate"
                  #bookDate="ngbDatepicker">
                  <div class="input-group-append">
                    <button class="fa fa-calendar" (click)="bookDate.toggle()" type="button"></button>
                  </div>
                </div>
                <div class="alert alert-danger" *ngIf="bookDate.touched && !bookDate.valid">Please specify the date.</div>
              </div> -->
            
              <div *ngIf="!booking.id">
                <!-- <button style="margin-bottom: 10px;" nbButton fullWidth status="default" outline (click)="onClickReset()">Reset</button> -->
                <button nbButton fullWidth status="success" [disabled]="!f.valid">Add</button>
              </div>
              <div *ngIf="booking.id">
                <!-- <button style="margin-bottom: 10px;" nbButton fullWidth status="default" (click)="onClickReset()">Reset</button> -->
                <button nbButton fullWidth status="primary" [disabled]="!f.valid">Save</button>
              </div>
            
              <br>
              <pre>{{ booking | json }}</pre>
            </form>
          </nb-card-body>
      </nb-card>
  </div>
</div>